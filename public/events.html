<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Events</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .event {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
        }
        .event button {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>Events</h1>
    <form id="event-form">
        <label for="event-name">Event Name:</label>
        <input type="text" id="event-name" name="name" required>
        <button type="submit">Add Event</button>
    </form>


    <div id="events-container"></div>

    <script>
        document.getElementById('event-form').addEventListener('submit', async (e) => {
            e.preventDefault();

            const eventName = document.getElementById('event-name').value;

            try {
                const response = await fetch('https://ticketing-app-bu5y.onrender.com/api/events', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ name: eventName })
                });

                if (!response.ok) {
                    throw new Error('Failed to add event');
                }

                const newEvent = await response.json();

                const container = document.getElementById('events-container');

                const eventDiv = document.createElement('div');
                eventDiv.className = 'event';

                const title = document.createElement('h2');
                title.textContent = newEvent.name || 'Unnamed Event';

                const description = document.createElement('p');
                description.textContent = newEvent.description || 'No description available.';

                const copyButton = document.createElement('button');
                copyButton.textContent = 'Copy ID';
                copyButton.onclick = () => {
                    navigator.clipboard.writeText(newEvent.id).then(() => {
                        alert('Event ID copied to clipboard!');
                    }).catch(err => {
                        console.error('Failed to copy ID:', err);
                    });
                };

                eventDiv.appendChild(title);
                eventDiv.appendChild(description);
                eventDiv.appendChild(copyButton);

                container.appendChild(eventDiv);

                document.getElementById('event-form').reset();
            } catch (error) {
                console.error('Error adding event:', error);
            }
        });
        async function fetchEvents() {
            try {
                const response = await fetch('https://ticketing-app-bu5y.onrender.com/api/events');
                const events = await response.json();

                const container = document.getElementById('events-container');
                container.innerHTML = '';

                events.forEach(event => {
                    const eventDiv = document.createElement('div');
                    eventDiv.className = 'event';

                    const title = document.createElement('h2');
                    title.textContent = event.name || 'Unnamed Event';

                    const description = document.createElement('p');
                    description.textContent = event.description || 'No description available.';

                    const copyButton = document.createElement('button');
                    copyButton.textContent = 'Copy ID';
                    copyButton.onclick = () => {
                        navigator.clipboard.writeText(event.id).then(() => {
                            alert('Event ID copied to clipboard!');
                        }).catch(err => {
                            console.error('Failed to copy ID:', err);
                        });
                    };
                    const deleteButton = document.createElement('button');
                    deleteButton.textContent = 'Delete Event';
                    deleteButton.style.backgroundColor = 'red';
                    deleteButton.style.color = 'white';
                    deleteButton.style.border = 'none';
                    deleteButton.style.padding = '5px 10px';
                    deleteButton.style.cursor = 'pointer';
                    deleteButton.onclick = async () => {
                        try {
                            const deleteResponse = await fetch(`https://ticketing-app-bu5y.onrender.com/api/events/${event.id}`, {
                                method: 'DELETE'
                            });

                            if (!deleteResponse.ok) {
                                throw new Error('Failed to delete event');
                            }

                            eventDiv.remove();
                        } catch (error) {
                            console.error('Error deleting event:', error);
                        }
                    };
                    eventDiv.appendChild(deleteButton);
                    eventDiv.appendChild(title);
                    eventDiv.appendChild(description);
                    eventDiv.appendChild(copyButton);

                    container.appendChild(eventDiv);
                });
            } catch (error) {
                console.error('Error fetching events:', error);
            }
        }

        fetchEvents();
    </script>
</body>
</html></html>